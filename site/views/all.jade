extends template

block content
	div.grid.all_pages
		each page in pages
			//- Extract data
			- var title, author, coverImageUrl = null;
			- var datetime = page._id.getTimestamp()
			- datetime = (datetime.getMonth() + 1) + '/' + datetime.getDate() + '/' + datetime.getFullYear()
			each o in page.components
				if o.component_type == "header"
					- title = o.component_data["title"]
					- author = o.component_data["author"]
					- coverImageUrl = o.component_data["coverImageUrl"]
					break

			//- Display data
			div.col-md-3.col-sm-6.page
				div.card
					img(src=coverImageUrl, class="coverImage card-img-top")
					div.card-block
						p.title.card-text Title: #{title}
						p.author.card-text Author: #{author}
						span.datetime.card-text.text-muted Created #{datetime}
					
						div.row
							div.col-sm-4
								a(class='btn btn-primary' href='/update?pageID=' + page._id) Update
							div.col-sm-4
								form(method='POST', action='/page/#{page._id}?_method=DELETE')
									button(class='btn btn-default' type='submit') Delete
							